<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
    <title>Space Shooter — Play on PC & Mobile</title>
    <style>
        :root {
            --bg: #030412;
            --accent: #4ee;
            --danger: #ff6b6b
        }

        html,
        body {
            height: 100%;
            margin: 0;
            background: var(--bg);
            color: #fff;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial
        }

        #gameWrap {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-btn-2 {
            position: fixed;
            top: 15px;
            left: 15px;
            padding: 8px 16px;
            font-size: 14px;
            background: #4a90e2;
            border: none;
            border-radius: 20px;
            color: white;
            text-decoration: none;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            font-family: Arial, sans-serif;
        }

        .back-btn-2:hover {
            background: #357ae8;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        canvas {
            background: linear-gradient(180deg, #00121a, #021524);
            border-radius: 12px;
            box-shadow: 0 6px 30px rgba(0, 0, 0, .6);
            touch-action: none
        }

        .hud {
            position: absolute;
            left: 12px;
            top: 12px;
            display: flex;
            gap: 12px;
            align-items: center
        }

        .hud .box {
            background: rgba(255, 255, 255, 0.04);
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 600
        }

        .controls {
            position: absolute;
            right: 12px;
            bottom: 12px;
            display: flex;
            gap: 8px;
            align-items: center
        }

        .touch-controls {
            display: none;
            gap: 8px
        }

        .btn {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.06);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            user-select: none
        }

        .btn:active {
            transform: scale(.98);
        }

        .big {
            width: 84px;
            height: 84px
        }

        @media (max-width:900px) {
            canvas {
                width: 95vw;
                height: 65vh
            }

            .touch-controls {
                display: flex
            }

            .hud {
                left: 8px;
                top: 8px
            }
        }

        @media (min-width:901px) {
            canvas {
                width: 900px;
                height: 600px
            }
        }

        #overlay {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: auto
        }

        .menu {
            background: rgba(0, 0, 0, 0.55);
            backdrop-filter: blur(6px);
            padding: 20px;
            border-radius: 12px;
            text-align: center
        }

        .menu h1 {
            margin: 0 0 10px;
            font-size: 20px
        }

        .menu button {
            margin-top: 10px;
            padding: 10px 16px;
            border-radius: 8px;
            border: 0;
            background: var(--accent);
            color: #001;
            cursor: pointer;
            font-weight: 700
        }

        .small {
            font-size: 13px;
            opacity: .9
        }
    </style>
</head>

<body>
    <div id="gameWrap">
        <canvas id="game"></canvas>
        <div class="hud">
            <a href="../index.html" class="back-btn-2">← Back</a>
            <div class="box" id="score">Score: 0</div>
            <div class="box" id="lives">Lives: 3</div>
            <div class="box" id="level">Level: 1</div>
        </div>
        <div class="controls">
            <div class="touch-controls" id="touchControls">
                <div class="btn" id="leftBtn">◀</div>
                <div class="btn" id="shootBtn">●</div>
                <div class="btn" id="rightBtn">▶</div>
            </div>
            <div style="color:rgba(255,255,255,.6);font-size:13px" class="small">Arrows / A D to move • Space / Tap to
                shoot</div>
        </div>
        <div id="overlay">
            <div class="menu" id="menu">
                <h1>Space Shooter</h1>
                <div class="small">Controls: Arrow keys / A D & Space on PC — Tap buttons on mobile</div>
                <button id="startBtn">Start Game</button>
                <div style="margin-top:8px" class="small">Tilt/accelerometer not required — simple & responsive.</div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            const cssW = canvas.clientWidth || parseInt(canvas.style.width) || canvas.width;
            const cssH = canvas.clientHeight || parseInt(canvas.style.height) || canvas.height;
            const ratio = Math.min(window.devicePixelRatio || 1, 2);
            canvas.width = Math.floor(cssW * ratio);
            canvas.height = Math.floor(cssH * ratio);
            ctx.setTransform(ratio, 0, 0, ratio, 0, 0);
        }

        function applyInitialSize() {
            if (window.innerWidth > 900) {
                canvas.style.width = '900px';
                canvas.style.height = '600px';
            } else {
                canvas.style.width = '95vw';
                canvas.style.height = Math.round(window.innerHeight * 0.65) + 'px';
            }
        }
        applyInitialSize();
        window.addEventListener('resize', () => { applyInitialSize(); resizeCanvas(); });
        resizeCanvas();

        let score = 0, lives = 3, level = 1, playing = false;
        const ui = { score: document.getElementById('score'), lives: document.getElementById('lives'), level: document.getElementById('level') };

        const player = { x: 450 / 2, y: 520, w: 28, h: 32, speed: 260, cooldown: 0 };

        const bullets = []; const enemies = []; const enemyBullets = [];
        let lastTime = 0;
        const keys = { left: false, right: false, shoot: false };

        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        const shootBtn = document.getElementById('shootBtn');

        function bindTouch(btn, keyName) {
            btn.addEventListener('touchstart', e => { e.preventDefault(); keys[keyName] = true; });
            btn.addEventListener('touchend', e => { e.preventDefault(); keys[keyName] = false; });
            btn.addEventListener('mousedown', e => { e.preventDefault(); keys[keyName] = true; });
            btn.addEventListener('mouseup', e => { e.preventDefault(); keys[keyName] = false; });
            btn.addEventListener('mouseleave', e => { e.preventDefault(); keys[keyName] = false; });
        }
        bindTouch(leftBtn, 'left'); bindTouch(rightBtn, 'right'); bindTouch(shootBtn, 'shoot');

        window.addEventListener('keydown', e => {
            if (e.code === 'ArrowLeft' || e.key === 'a' || e.key === 'A') keys.left = true;
            if (e.code === 'ArrowRight' || e.key === 'd' || e.key === 'D') keys.right = true;
            if (e.code === 'Space') keys.shoot = true;
        });
        window.addEventListener('keyup', e => {
            if (e.code === 'ArrowLeft' || e.key === 'a' || e.key === 'A') keys.left = false;
            if (e.code === 'ArrowRight' || e.key === 'd' || e.key === 'D') keys.right = false;
            if (e.code === 'Space') keys.shoot = false;
        });

        const overlay = document.getElementById('overlay');
        const startBtn = document.getElementById('startBtn');
        startBtn.addEventListener('click', startGame);

        function startGame() {
            overlay.style.display = 'none';
            reset();
            playing = true;
            lastTime = performance.now();
            requestAnimationFrame(loop);
        }

        function reset() {
            score = 0; lives = 3; level = 1; bullets.length = 0; enemies.length = 0; enemyBullets.length = 0;
            const ratio = Math.min(window.devicePixelRatio || 1, 2);
            player.x = (canvas.width / ratio) / 2;
            player.y = (canvas.height / ratio) - 80;
            player.cooldown = 0;
            spawnWave(level);
            updateUI();
        }

        function updateUI() { ui.score.textContent = 'Score: ' + score; ui.lives.textContent = 'Lives: ' + lives; ui.level.textContent = 'Level: ' + level }

        function spawnWave(n) {
            const cols = Math.min(8, 3 + Math.floor(n * 1.2));
            const rows = Math.min(5, 2 + Math.floor(n / 2));
            const spacingX = 64; const spacingY = 48;
            const startX = (900 - (cols - 1) * spacingX) / 2;
            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    enemies.push({ x: startX + c * spacingX, y: 60 + r * spacingY, w: 34, h: 24, vx: 40 + n * 8, dir: 1, health: 1 + Math.floor(n / 3) });
                }
            }
        }

        function loop(t) {
            const dt = Math.min(0.05, (t - lastTime) / 1000);
            lastTime = t;
            update(dt, t);
            draw();
            if (playing) requestAnimationFrame(loop);
        }

        function update(dt, t) {
            if (keys.left) player.x -= player.speed * dt;
            if (keys.right) player.x += player.speed * dt;
            const boundsW = canvas.width / Math.min(window.devicePixelRatio || 1, 2);
            player.x = Math.max(20, Math.min(boundsW - 20, player.x));

            player.cooldown -= dt;
            if (keys.shoot && player.cooldown <= 0) {
                bullets.push({ x: player.x, y: player.y - 18, r: 4, speed: 520 });
                player.cooldown = 0.22;
            }

            for (let i = bullets.length - 1; i >= 0; i--) {
                bullets[i].y -= bullets[i].speed * dt;
                if (bullets[i].y < -10) bullets.splice(i, 1);
            }

            for (let i = enemies.length - 1; i >= 0; i--) {
                let e = enemies[i];
                e.x += e.vx * dt * e.dir;
                if (e.x < e.w / 2 || e.x > boundsW - e.w / 2) {
                    e.dir *= -1;
                    e.y += 20;
                }
                e.y += 8 * dt;
                if (Math.random() < 0.003 + level * 0.001) {
                    enemyBullets.push({ x: e.x, y: e.y + 14, r: 5, speed: 160 + Math.random() * 60 });
                }
                for (let j = bullets.length - 1; j >= 0; j--) {
                    if (dist(bullets[j].x, bullets[j].y, e.x, e.y) < 22) {
                        bullets.splice(j, 1);
                        e.health -= 1;
                        if (e.health <= 0) { enemies.splice(i, 1); score += 10; updateUI(); }
                        break;
                    }
                }
            }

            for (let i = enemyBullets.length - 1; i >= 0; i--) {
                enemyBullets[i].y += enemyBullets[i].speed * dt;
                if (enemyBullets[i].y > canvas.height / Math.min(window.devicePixelRatio || 1, 2) + 20) enemyBullets.splice(i, 1);
                else if (dist(enemyBullets[i].x, enemyBullets[i].y, player.x, player.y) < 18) {
                    enemyBullets.splice(i, 1); lives--; updateUI();
                    if (lives <= 0) gameOver();
                }
            }

            for (let i = enemies.length - 1; i >= 0; i--) {
                if (enemies[i].y > canvas.height / Math.min(window.devicePixelRatio || 1, 2) - 60) {
                    lives--; enemies.splice(i, 1); updateUI(); if (lives <= 0) gameOver();
                }
            }

            if (enemies.length === 0) { level++; spawnWave(level); updateUI(); }
        }

        function gameOver() {
            playing = false;
            overlay.style.display = 'flex';
            document.getElementById('menu').innerHTML = `<h1>Game Over</h1><div class="small">Score: ${score}</div><button id="restartBtn">Play Again</button>`;
            document.getElementById('restartBtn').addEventListener('click', () => {
                document.getElementById('menu').innerHTML = `\n          <h1>Space Shooter</h1>\n          <div class="small">Controls: Arrow keys / A D & Space on PC — Tap buttons on mobile</div>\n          <button id="startBtn">Start Game</button>\n          <div style="margin-top:8px" class="small">Tilt/accelerometer not required — simple & responsive.</div>`;
                const newStart = document.getElementById('startBtn');
                newStart.addEventListener('click', startGame);
            });
        }

        function draw() {
            const w = canvas.width / Math.min(window.devicePixelRatio || 1, 2);
            const h = canvas.height / Math.min(window.devicePixelRatio || 1, 2);
            ctx.clearRect(0, 0, w, h);
            drawStars(w, h);

            ctx.save();
            ctx.translate(player.x, player.y);
            ctx.beginPath(); ctx.moveTo(0, -14); ctx.lineTo(10, 12); ctx.lineTo(-10, 12); ctx.closePath();
            ctx.fillStyle = '#9ff'; ctx.fill();
            ctx.beginPath(); ctx.arc(0, 0, 5, 0, Math.PI * 2); ctx.fillStyle = '#034'; ctx.fill();
            ctx.restore();

            ctx.fillStyle = '#4ef';
            bullets.forEach(b => { ctx.beginPath(); ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2); ctx.fill(); });

            enemies.forEach(e => {
                ctx.save(); ctx.translate(e.x, e.y);
                ctx.fillStyle = '#f88';
                ctx.fillRect(-e.w / 2, -e.h / 2, e.w, e.h);
                ctx.fillStyle = '#300'; ctx.fillRect(-e.w / 2, -e.h / 2 + e.h - 6, e.w, 4);
                ctx.restore();
            });

            ctx.fillStyle = '#ffb';
            enemyBullets.forEach(b => { ctx.beginPath(); ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2); ctx.fill(); });
        }

        const starSeed = Array.from({ length: 90 }, () => ({ x: Math.random() * 900, y: Math.random() * 600, size: Math.random() * 2 + 0.4 }));
        function drawStars(w, h) {
            ctx.fillStyle = 'rgba(255,255,255,0.06)';
            starSeed.forEach(s => { s.y += 0.3; if (s.y > h) s.y = 0; ctx.fillRect(s.x, s.y, s.size, s.size); });
        }

        function dist(x1, y1, x2, y2) { const dx = x1 - x2, dy = y1 - y2; return Math.sqrt(dx * dx + dy * dy); }

        window.addEventListener('load', () => { applyInitialSize(); resizeCanvas(); });

        window.addEventListener('keydown', e => { if (e.key === 'p' || e.key === 'P') { playing = !playing; if (playing) { lastTime = performance.now(); requestAnimationFrame(loop); overlay.style.display = 'none' } else overlay.style.display = 'flex'; } });
    </script>
</body>

</html>