<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sudoku Game</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      padding: 20px;
      color: #333;
    }

    .container {
      width: 100%;
      max-width: 500px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      padding: 25px;
      text-align: center;
    }

    h1 {
      color: #2c3e50;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #7f8c8d;
      margin-bottom: 20px;
      font-size: 16px;
    }

    .game-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      padding: 10px;
      background-color: #f8f9fa;
      border-radius: 8px;
    }

    .timer,
    .difficulty {
      font-weight: bold;
      color: #2c3e50;
    }

    .sudoku-board {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      grid-gap: 1px;
      background-color: #2c3e50;
      border: 2px solid #2c3e50;
      margin: 0 auto 20px;
      max-width: 450px;
    }

    .back-btn-2 {
      position: fixed;
      top: 15px;
      left: 15px;
      padding: 8px 16px;
      font-size: 14px;
      background: #4a90e2;
      border: none;
      border-radius: 20px;
      color: white;
      text-decoration: none;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      font-family: Arial, sans-serif;
    }

    .back-btn-2:hover {
      background: #357ae8;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .cell {
      aspect-ratio: 1;
      background-color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
      user-select: none;
    }

    .cell:hover {
      background-color: #f1f2f6;
    }

    .cell.selected {
      background-color: #d6eaf8;
    }

    .cell.highlighted {
      background-color: #e8f4fc;
    }

    .cell.error {
      background-color: #ffcccc;
      color: #e74c3c;
    }

    .cell.fixed {
      color: #2c3e50;
      font-weight: bold;
    }

    .cell.user-input {
      color: #3498db;
    }

    /* Thicker borders for 3x3 boxes */
    .cell:nth-child(3n) {
      border-right: 2px solid #2c3e50;
    }

    .cell:nth-child(9n) {
      border-right: none;
    }

    .cell:nth-child(n+19):nth-child(-n+27),
    .cell:nth-child(n+46):nth-child(-n+54) {
      border-bottom: 2px solid #2c3e50;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .number-btn,
    .action-btn {
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .number-btn {
      background-color: #3498db;
      color: white;
    }

    .number-btn:hover {
      background-color: #2980b9;
    }

    .action-btn {
      background-color: #2ecc71;
      color: white;
      padding: 0 15px;
      width: auto;
    }

    .action-btn:hover {
      background-color: #27ae60;
    }

    .action-btn.delete {
      background-color: #e74c3c;
    }

    .action-btn.delete:hover {
      background-color: #c0392b;
    }

    .difficulty-selector {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }

    .difficulty-btn {
      padding: 8px 15px;
      border: none;
      border-radius: 5px;
      background-color: #ecf0f1;
      color: #2c3e50;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.2s;
    }

    .difficulty-btn.active {
      background-color: #3498db;
      color: white;
    }

    .difficulty-btn:hover:not(.active) {
      background-color: #bdc3c7;
    }

    .message {
      margin-top: 15px;
      padding: 10px;
      border-radius: 5px;
      font-weight: bold;
      display: none;
    }

    .message.success {
      background-color: #d4edda;
      color: #155724;
      display: block;
    }

    .message.error {
      background-color: #f8d7da;
      color: #721c24;
      display: block;
    }

    @media (max-width: 500px) {
      .container {
        padding: 15px;
      }

      h1 {
        font-size: 24px;
      }

      .cell {
        font-size: 18px;
      }

      .number-btn,
      .action-btn {
        width: 35px;
        height: 35px;
        font-size: 16px;
      }

      .action-btn {
        padding: 0 10px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Sudoku</h1>
    <p class="subtitle">Fill the grid so every row, column and 3×3 box contains 1-9</p>
    <a href="../index.html" class="back-btn-2">← Back</a>
    <div class="game-info">
      <div class="timer">Time: <span id="timer">00:00</span></div>
      <div class="difficulty">Difficulty: <span id="difficulty">Medium</span></div>
    </div>

    <div class="sudoku-board" id="sudoku-board">
      <!-- Cells will be generated by JavaScript -->
    </div>

    <div class="controls">
      <button class="number-btn" data-number="1">1</button>
      <button class="number-btn" data-number="2">2</button>
      <button class="number-btn" data-number="3">3</button>
      <button class="number-btn" data-number="4">4</button>
      <button class="number-btn" data-number="5">5</button>
      <button class="number-btn" data-number="6">6</button>
      <button class="number-btn" data-number="7">7</button>
      <button class="number-btn" data-number="8">8</button>
      <button class="number-btn" data-number="9">9</button>
      <button class="action-btn delete" id="delete-btn">Delete</button>
    </div>

    <div class="controls">
      <button class="action-btn" id="check-btn">Check</button>
      <button class="action-btn" id="hint-btn">Hint</button>
      <button class="action-btn" id="new-game-btn">New Game</button>
    </div>

    <div class="difficulty-selector">
      <button class="difficulty-btn active" data-difficulty="easy">Easy</button>
      <button class="difficulty-btn" data-difficulty="medium">Medium</button>
      <button class="difficulty-btn" data-difficulty="hard">Hard</button>
    </div>

    <div class="message" id="message"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Game state
      let selectedCell = null;
      let gameBoard = [];
      let solutionBoard = [];
      let initialBoard = [];
      let timerInterval = null;
      let seconds = 0;
      let currentDifficulty = 'medium';
      let hintsUsed = 0;

      // DOM elements
      const sudokuBoard = document.getElementById('sudoku-board');
      const timerElement = document.getElementById('timer');
      const difficultyElement = document.getElementById('difficulty');
      const messageElement = document.getElementById('message');
      const numberButtons = document.querySelectorAll('.number-btn');
      const deleteButton = document.getElementById('delete-btn');
      const checkButton = document.getElementById('check-btn');
      const hintButton = document.getElementById('hint-btn');
      const newGameButton = document.getElementById('new-game-btn');
      const difficultyButtons = document.querySelectorAll('.difficulty-btn');

      // Initialize the game
      initGame();

      function initGame() {
        createBoard();
        generateSudoku();
        startTimer();
        setupEventListeners();
      }

      function createBoard() {
        sudokuBoard.innerHTML = '';
        for (let i = 0; i < 81; i++) {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.dataset.index = i;
          cell.addEventListener('click', handleCellClick);
          sudokuBoard.appendChild(cell);
        }
      }

      function handleCellClick(e) {
        const index = parseInt(e.target.dataset.index);

        // Clear previous selection
        if (selectedCell !== null) {
          selectedCell.classList.remove('selected');
          clearHighlights();
        }

        // Select new cell if it's not a fixed cell
        if (!initialBoard[Math.floor(index / 9)][index % 9]) {
          selectedCell = e.target;
          selectedCell.classList.add('selected');
          highlightRelatedCells(index);
        } else {
          selectedCell = null;
        }
      }

      function highlightRelatedCells(index) {
        const row = Math.floor(index / 9);
        const col = index % 9;

        // Highlight row and column
        for (let i = 0; i < 9; i++) {
          // Highlight row
          const rowCell = document.querySelector(`.cell[data-index="${row * 9 + i}"]`);
          if (rowCell !== selectedCell) {
            rowCell.classList.add('highlighted');
          }

          // Highlight column
          const colCell = document.querySelector(`.cell[data-index="${i * 9 + col}"]`);
          if (colCell !== selectedCell) {
            colCell.classList.add('highlighted');
          }
        }

        // Highlight 3x3 box
        const boxRowStart = Math.floor(row / 3) * 3;
        const boxColStart = Math.floor(col / 3) * 3;

        for (let i = boxRowStart; i < boxRowStart + 3; i++) {
          for (let j = boxColStart; j < boxColStart + 3; j++) {
            const boxCell = document.querySelector(`.cell[data-index="${i * 9 + j}"]`);
            if (boxCell !== selectedCell) {
              boxCell.classList.add('highlighted');
            }
          }
        }
      }

      function clearHighlights() {
        const highlightedCells = document.querySelectorAll('.cell.highlighted');
        highlightedCells.forEach(cell => {
          cell.classList.remove('highlighted');
        });
      }

      function setupEventListeners() {
        // Number buttons
        numberButtons.forEach(button => {
          button.addEventListener('click', function () {
            if (selectedCell) {
              const number = parseInt(this.dataset.number);
              const index = parseInt(selectedCell.dataset.index);
              const row = Math.floor(index / 9);
              const col = index % 9;

              // Only allow input if the cell is not fixed
              if (!initialBoard[row][col]) {
                gameBoard[row][col] = number;
                selectedCell.textContent = number;
                selectedCell.classList.add('user-input');

                // Check if the input is correct
                if (number !== solutionBoard[row][col]) {
                  selectedCell.classList.add('error');
                } else {
                  selectedCell.classList.remove('error');
                }

                // Check if the game is complete
                if (isGameComplete()) {
                  endGame(true);
                }
              }
            }
          });
        });

        // Delete button
        deleteButton.addEventListener('click', function () {
          if (selectedCell) {
            const index = parseInt(selectedCell.dataset.index);
            const row = Math.floor(index / 9);
            const col = index % 9;

            // Only allow deletion if the cell is not fixed
            if (!initialBoard[row][col]) {
              gameBoard[row][col] = 0;
              selectedCell.textContent = '';
              selectedCell.classList.remove('user-input', 'error');
            }
          }
        });

        // Check button
        checkButton.addEventListener('click', function () {
          if (isGameComplete()) {
            endGame(true);
          } else {
            showMessage('Keep going! The puzzle is not complete yet.', 'error');
          }
        });

        // Hint button
        hintButton.addEventListener('click', function () {
          if (selectedCell) {
            const index = parseInt(selectedCell.dataset.index);
            const row = Math.floor(index / 9);
            const col = index % 9;

            // Only provide hint if the cell is empty
            if (gameBoard[row][col] === 0) {
              gameBoard[row][col] = solutionBoard[row][col];
              selectedCell.textContent = solutionBoard[row][col];
              selectedCell.classList.add('user-input');
              hintsUsed++;

              // Check if the game is complete
              if (isGameComplete()) {
                endGame(true);
              }
            }
          } else {
            showMessage('Please select a cell first to get a hint.', 'error');
          }
        });

        // New game button
        newGameButton.addEventListener('click', function () {
          resetGame();
        });

        // Difficulty buttons
        difficultyButtons.forEach(button => {
          button.addEventListener('click', function () {
            // Update active button
            difficultyButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');

            // Set difficulty and start new game
            currentDifficulty = this.dataset.difficulty;
            difficultyElement.textContent = this.textContent;
            resetGame();
          });
        });

        // Keyboard support
        document.addEventListener('keydown', function (e) {
          if (selectedCell && e.key >= '1' && e.key <= '9') {
            const number = parseInt(e.key);
            const index = parseInt(selectedCell.dataset.index);
            const row = Math.floor(index / 9);
            const col = index % 9;

            // Only allow input if the cell is not fixed
            if (!initialBoard[row][col]) {
              gameBoard[row][col] = number;
              selectedCell.textContent = number;
              selectedCell.classList.add('user-input');

              // Check if the input is correct
              if (number !== solutionBoard[row][col]) {
                selectedCell.classList.add('error');
              } else {
                selectedCell.classList.remove('error');
              }

              // Check if the game is complete
              if (isGameComplete()) {
                endGame(true);
              }
            }
          } else if (selectedCell && (e.key === 'Backspace' || e.key === 'Delete')) {
            const index = parseInt(selectedCell.dataset.index);
            const row = Math.floor(index / 9);
            const col = index % 9;

            // Only allow deletion if the cell is not fixed
            if (!initialBoard[row][col]) {
              gameBoard[row][col] = 0;
              selectedCell.textContent = '';
              selectedCell.classList.remove('user-input', 'error');
            }
          } else if (e.key === 'ArrowUp' || e.key === 'ArrowDown' ||
            e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
            e.preventDefault();
            if (selectedCell) {
              moveSelection(e.key);
            }
          }
        });
      }

      function moveSelection(direction) {
        const index = parseInt(selectedCell.dataset.index);
        let newIndex = index;

        switch (direction) {
          case 'ArrowUp':
            newIndex = index - 9;
            if (newIndex < 0) newIndex = index;
            break;
          case 'ArrowDown':
            newIndex = index + 9;
            if (newIndex > 80) newIndex = index;
            break;
          case 'ArrowLeft':
            newIndex = index - 1;
            if (Math.floor(newIndex / 9) !== Math.floor(index / 9)) newIndex = index;
            break;
          case 'ArrowRight':
            newIndex = index + 1;
            if (Math.floor(newIndex / 9) !== Math.floor(index / 9)) newIndex = index;
            break;
        }

        // Clear previous selection
        selectedCell.classList.remove('selected');
        clearHighlights();

        // Select new cell
        selectedCell = document.querySelector(`.cell[data-index="${newIndex}"]`);
        selectedCell.classList.add('selected');
        highlightRelatedCells(newIndex);
      }

      function generateSudoku() {
        // For simplicity, using a pre-defined puzzle
        // In a real implementation, you would generate puzzles algorithmically

        // Example puzzle (0 represents empty cells)
        const puzzle = {
          easy: [
            [5, 3, 0, 0, 7, 0, 0, 0, 0],
            [6, 0, 0, 1, 9, 5, 0, 0, 0],
            [0, 9, 8, 0, 0, 0, 0, 6, 0],
            [8, 0, 0, 0, 6, 0, 0, 0, 3],
            [4, 0, 0, 8, 0, 3, 0, 0, 1],
            [7, 0, 0, 0, 2, 0, 0, 0, 6],
            [0, 6, 0, 0, 0, 0, 2, 8, 0],
            [0, 0, 0, 4, 1, 9, 0, 0, 5],
            [0, 0, 0, 0, 8, 0, 0, 7, 9]
          ],
          medium: [
            [0, 0, 0, 6, 0, 0, 4, 0, 0],
            [7, 0, 0, 0, 0, 3, 6, 0, 0],
            [0, 0, 0, 0, 9, 1, 0, 8, 0],
            [0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 5, 0, 1, 8, 0, 0, 0, 3],
            [0, 0, 0, 3, 0, 6, 0, 4, 5],
            [0, 4, 0, 2, 0, 0, 0, 6, 0],
            [9, 0, 3, 0, 0, 0, 0, 0, 0],
            [0, 2, 0, 0, 0, 0, 1, 0, 0]
          ],
          hard: [
            [8, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 3, 6, 0, 0, 0, 0, 0],
            [0, 7, 0, 0, 9, 0, 2, 0, 0],
            [0, 5, 0, 0, 0, 7, 0, 0, 0],
            [0, 0, 0, 0, 4, 5, 7, 0, 0],
            [0, 0, 0, 1, 0, 0, 0, 3, 0],
            [0, 0, 1, 0, 0, 0, 0, 6, 8],
            [0, 0, 8, 5, 0, 0, 0, 1, 0],
            [0, 9, 0, 0, 0, 0, 4, 0, 0]
          ]
        };

        // Solution for the puzzles
        const solution = {
          easy: [
            [5, 3, 4, 6, 7, 8, 9, 1, 2],
            [6, 7, 2, 1, 9, 5, 3, 4, 8],
            [1, 9, 8, 3, 4, 2, 5, 6, 7],
            [8, 5, 9, 7, 6, 1, 4, 2, 3],
            [4, 2, 6, 8, 5, 3, 7, 9, 1],
            [7, 1, 3, 9, 2, 4, 8, 5, 6],
            [9, 6, 1, 5, 3, 7, 2, 8, 4],
            [2, 8, 7, 4, 1, 9, 6, 3, 5],
            [3, 4, 5, 2, 8, 6, 1, 7, 9]
          ],
          medium: [
            [5, 8, 1, 6, 7, 2, 4, 3, 9],
            [7, 9, 2, 8, 4, 3, 6, 5, 1],
            [3, 6, 4, 5, 9, 1, 7, 8, 2],
            [4, 3, 8, 9, 5, 7, 2, 1, 6],
            [2, 5, 6, 1, 8, 4, 9, 7, 3],
            [1, 7, 9, 3, 2, 6, 8, 4, 5],
            [8, 4, 5, 2, 1, 9, 3, 6, 7],
            [9, 1, 3, 7, 6, 8, 5, 2, 4],
            [6, 2, 7, 4, 3, 5, 1, 9, 8]
          ],
          hard: [
            [8, 1, 2, 7, 5, 3, 6, 4, 9],
            [9, 4, 3, 6, 8, 2, 1, 7, 5],
            [6, 7, 5, 4, 9, 1, 2, 8, 3],
            [1, 5, 4, 2, 3, 7, 8, 9, 6],
            [3, 6, 9, 8, 4, 5, 7, 2, 1],
            [2, 8, 7, 1, 6, 9, 5, 3, 4],
            [5, 2, 1, 9, 7, 4, 3, 6, 8],
            [4, 3, 8, 5, 2, 6, 9, 1, 7],
            [7, 9, 6, 3, 1, 8, 4, 5, 2]
          ]
        };

        // Set the boards based on difficulty
        gameBoard = JSON.parse(JSON.stringify(puzzle[currentDifficulty]));
        solutionBoard = JSON.parse(JSON.stringify(solution[currentDifficulty]));
        initialBoard = JSON.parse(JSON.stringify(puzzle[currentDifficulty]));

        // Render the board
        renderBoard();
      }

      function renderBoard() {
        const cells = document.querySelectorAll('.cell');
        cells.forEach((cell, index) => {
          const row = Math.floor(index / 9);
          const col = index % 9;
          const value = gameBoard[row][col];

          cell.textContent = value !== 0 ? value : '';
          cell.className = 'cell';

          if (value !== 0) {
            if (initialBoard[row][col] !== 0) {
              cell.classList.add('fixed');
            } else {
              cell.classList.add('user-input');

              // Check if the input is correct
              if (value !== solutionBoard[row][col]) {
                cell.classList.add('error');
              }
            }
          }
        });
      }

      function isGameComplete() {
        for (let i = 0; i < 9; i++) {
          for (let j = 0; j < 9; j++) {
            if (gameBoard[i][j] === 0 || gameBoard[i][j] !== solutionBoard[i][j]) {
              return false;
            }
          }
        }
        return true;
      }

      function startTimer() {
        seconds = 0;
        if (timerInterval) clearInterval(timerInterval);

        timerInterval = setInterval(function () {
          seconds++;
          const minutes = Math.floor(seconds / 60);
          const remainingSeconds = seconds % 60;
          timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }, 1000);
      }

      function endGame(isWin) {
        clearInterval(timerInterval);

        if (isWin) {
          showMessage(`Congratulations! You solved the puzzle in ${timerElement.textContent} with ${hintsUsed} hint(s) used.`, 'success');
        }
      }

      function resetGame() {
        clearInterval(timerInterval);
        selectedCell = null;
        hintsUsed = 0;
        generateSudoku();
        startTimer();
        clearHighlights();
        hideMessage();
      }

      function showMessage(text, type) {
        messageElement.textContent = text;
        messageElement.className = `message ${type}`;
      }

      function hideMessage() {
        messageElement.className = 'message';
      }
    });
  </script>
</body>

</html>
